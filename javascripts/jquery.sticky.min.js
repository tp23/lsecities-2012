(function(a){var b={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper"},c=a(window),d=a(document),e=[],f=c.height(),g=function(){var a=c.scrollTop(),b=d.height(),g=b-f,h=a>g?g-a:0;for(var i=0;i<e.length;i++){var j=e[i],k=j.stickyWrapper.offset().top,l=k-j.topSpacing-h;if(a<=l)j.currentTop!==null&&(j.stickyElement.css("position","").css("top","").removeClass(j.className),j.stickyElement.parent().removeClass(j.className),j.currentTop=null);else{var m=b-j.stickyElement.outerHeight()-j.topSpacing-j.bottomSpacing-a-h;m<0?m+=j.topSpacing:m=j.topSpacing,j.currentTop!=m&&(j.stickyElement.css("position","fixed").css("top",m).addClass(j.className),j.stickyElement.parent().addClass(j.className),j.currentTop=m)}}},h=function(){f=c.height()},i={init:function(c){var d=a.extend(b,c);return this.each(function(){var b=a(this);stickyId=b.attr("id"),wrapper=a("<div></div>").attr("id",stickyId+"-sticky-wrapper").addClass(d.wrapperClassName),b.wrapAll(wrapper);var c=b.parent();c.css("height",b.outerHeight()),e.push({topSpacing:d.topSpacing,bottomSpacing:d.bottomSpacing,stickyElement:b,currentTop:null,stickyWrapper:c,className:d.className})})},update:g};window.addEventListener?(window.addEventListener("scroll",g,!1),window.addEventListener("resize",h,!1)):window.attachEvent&&(window.attachEvent("onscroll",g),window.attachEvent("onresize",h)),a.fn.sticky=function(b){if(i[b])return i[b].apply(this,Array.prototype.slice.call(arguments,1));if(typeof b=="object"||!b)return i.init.apply(this,arguments);a.error("Method "+b+" does not exist on jQuery.sticky")},a(function(){setTimeout(g,0)})})(jQuery)
